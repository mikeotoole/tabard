= simple_fields_for role do |f|
  = f.simple_fields_for 'permissions_attributes', permission, :index => permission.id do |pf|
    %tr.permission
      %td.slider{ :colspan => 4 }
        %fieldset.slider
          = pf.collection_radio :permission_level, [['View', 'View'], ['Update', 'Update'], ['Create', 'Add'], ['Delete', 'Delete']], :first, :last, :checked => 'show_p'
      %td
        - if permission.id
          = pf.input :id, :as => 'hidden', :wrapper => false
          %h3= permission.subject_class
        - else
          %fieldset.suggest
            %ol
              %li
                %input{ :type => 'text', :value => '' }
            = pf.collection_radio :subject_class, Permission::VALID_SUBJECT_CLASSES, :first, :last, :item_wrapper_tag => :li
      %td.actions
        %div
          - if permission.persisted? and can? :destroy, permission
            = link_to 'Remove Permission', role_permission_path(role, permission), :method => :delete, :remote => true, :confirm => 'Are you sure?', :class => 'delete', :meta => 'Remove this permission'
          - else
            %a{ :class => 'cancel', :meta => 'Cancel new permission' } Cancel