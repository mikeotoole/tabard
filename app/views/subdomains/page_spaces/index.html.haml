%h1 Topics

%table
  - if @page_spaces.size > 0
    %thead
      %tr
        %th.amount Pages
        %th.name Topic
        %th.name Game
        %th.actions
    %tbody
      - @page_spaces.each do |page_space|
        %tr
          %td.amount
            = page_space.pages.size if page_space.pages.size > 0
          %td.name
            = link_to page_space.name, page_space
          %td.name
            - if page_space.game != nil
              = link_to page_space.game_name, page_space.game
          %td.actions
            - if logged_in? and current_user.can_update(page_space)
              = link_to 'Edit', edit_page_space_path(page_space), :class => 'edit', :title => 'Edit'
            - if logged_in? and current_user.can_delete(page_space)
              = link_to 'Delete', page_space, :confirm => 'Are you sure?', :method => :delete, :class => 'delete', :title => 'Delete'
  - else
    %tbody
      %tr
        %td.empty{ :colspan => 4 } There are no topics to display.
        
  - if logged_in? and current_user.can_create("PageSpace")
    %tfoot
      %tr
        %td{ :colspan => 4 }
          = link_to 'Create New Topic', new_page_space_path, :class => 'button'