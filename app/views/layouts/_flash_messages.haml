%ul#flash
  - if !hide_announcements? && signed_in? && current_user.unread_announcements.size > 0
    = render 'layouts/flash_message_announcement', :discussion => current_user.unread_announcements.first
  - if !!flash[:alert]
    %li.alert
      :markdown
        #{flash[:alert]}
  - if !!flash[:error]
    %li.alert
      :markdown
        #{flash[:error]}
  - if !!flash[:notice]
    %li.notice
      :markdown
        #{flash[:notice]}
  - if !!flash[:messages]
    - flash[:messages].each do |message|
      %li{ :class => message[:class] }
        :markdown
          #{message[:body]}

- clear_flash_messages