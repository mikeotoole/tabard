- if activity.is_a? Comment
  - if user_signed_in? and current_user.in_community(activity.community).can? :show, activity
    = render "subdomains/comments/comment", :comment => activity, :include_children => false
  - else
    %li.comment
      Posted a
      %strong comment
      in
      %strong= link_to activity.community_name, root_url(:subdomain => activity.community_subdomain)
      —
      %time= "#{time_ago_in_words(activity.created_at)} ago"
- else
  - partial_name = activity.target_type.gsub(/(.)([A-Z])/,'\1_\2').downcase
  %li{ :class => "activity #{partial_name}" }
    = render "activities/#{partial_name}", :activity => activity
    —
    %time= "#{time_ago_in_words(activity.created_at)} ago"